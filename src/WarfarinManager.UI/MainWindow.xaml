<Window
    x:Class="WarfarinManager.UI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:WarfarinManager.UI.ViewModels"
    Title="{Binding Title}"
    Width="1050"
    Height="600"
    MinWidth="900"
    MinHeight="500"
    d:DataContext="{d:DesignInstance Type=vm:MainViewModel}"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">

    <Window.InputBindings>
        <KeyBinding Key="N" Modifiers="Ctrl" Command="{Binding NewPatientCommand}" />
        <KeyBinding Key="L" Modifiers="Ctrl" Command="{Binding ShowPatientListCommand}" />
        <KeyBinding Key="F" Modifiers="Ctrl" Command="{Binding SearchPatientCommand}" />
        <KeyBinding Key="F1" Command="{Binding ShowUserGuideCommand}" />
    </Window.InputBindings>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  Header  -->
        <Border
            Grid.Row="0"
            Padding="20,10"
            Background="#2C3E50">
            <TextBlock
                FontSize="18"
                FontWeight="SemiBold"
                Foreground="White"
                Text="TaoGEST - Gestione Terapia Anticoagulante Orale" />
        </Border>

        <!--  Menu  -->
        <Menu Grid.Row="1" Background="White">
            <!--  File Menu  -->
            <MenuItem Header="_File">
                <MenuItem
                    Command="{Binding NewPatientCommand}"
                    Header="Nuovo paziente"
                    InputGestureText="Ctrl+N" />
                <Separator />
                <MenuItem
                    Command="{Binding ExportDataCommand}"
                    Header="Esporta dati..." />
                <MenuItem
                    Command="{Binding ImportDataCommand}"
                    Header="Importa dati..." />
                <Separator />
                <MenuItem
                    Command="{Binding ExitCommand}"
                    Header="Esci"
                    InputGestureText="Alt+F4" />
            </MenuItem>

            <!--  Pazienti Menu  -->
            <MenuItem Header="_Pazienti">
                <MenuItem
                    Command="{Binding ShowPatientListCommand}"
                    Header="Lista pazienti"
                    InputGestureText="Ctrl+L" />
                <MenuItem
                    Command="{Binding SearchPatientCommand}"
                    Header="Cerca paziente..."
                    InputGestureText="Ctrl+F" />
                <Separator />
                <MenuItem
                    Command="{Binding ShowPatientStatisticsCommand}"
                    Header="Statistiche pazienti" />
            </MenuItem>

            <!--  Strumenti Menu  -->
            <MenuItem Header="_Strumenti">
                <MenuItem
                    Command="{Binding ShowInteractionCheckerCommand}"
                    Header="Verifica interazioni farmacologiche" />
                <MenuItem
                    Command="{Binding ShowBridgeTherapyCommand}"
                    Header="Gestione bridge therapy" />
                <Separator />
                <MenuItem
                    Command="{Binding ShowDrugDatabaseCommand}"
                    Header="Database farmaci interagenti" />
            </MenuItem>

            <!--  Opzioni Menu  -->
            <MenuItem Header="_Opzioni">
                <MenuItem
                    Command="{Binding ShowDoctorDataCommand}"
                    Header="Dati del medico..." />
                <MenuItem
                    Command="{Binding ShowPreferencesCommand}"
                    Header="Preferenze applicazione..." />
                <Separator />
                <MenuItem
                    Command="{Binding ShowDatabaseSettingsCommand}"
                    Header="Impostazioni database..." />
            </MenuItem>

            <!--  Aiuto Menu  -->
            <MenuItem Header="_Aiuto">
                <MenuItem
                    Command="{Binding ShowUserGuideCommand}"
                    Header="Guida utente"
                    InputGestureText="F1" />
                <Separator />
                <MenuItem Header="Linee guida professionali">
                    <MenuItem
                        Command="{Binding ShowProfessionalGuideCommand}"
                        CommandParameter="index.html"
                        Header="ðŸ“š Indice Guide" />
                    <Separator />
                    <MenuItem
                        Command="{Binding ShowProfessionalGuideCommand}"
                        CommandParameter="interactions.html"
                        Header="ðŸ’Š Interazioni Farmacologiche Warfarin" />
                    <MenuItem
                        Command="{Binding ShowProfessionalGuideCommand}"
                        CommandParameter="algoritmo-gestione-inr.html"
                        Header="ðŸ“Š Flowchart Gestione INR" />
                    <Separator />
                    <MenuItem
                        Command="{Binding ShowGuidelineCommand}"
                        CommandParameter="FCSA2016"
                        Header="Linee guida FCSA 2016" />
                    <MenuItem
                        Command="{Binding ShowGuidelineCommand}"
                        CommandParameter="ESC2020"
                        Header="Linee guida ESC 2020" />
                    <MenuItem
                        Command="{Binding ShowGuidelineCommand}"
                        CommandParameter="CHEST"
                        Header="Linee guida CHEST" />
                    <MenuItem
                        Command="{Binding ShowGuidelineCommand}"
                        CommandParameter="Perioperative"
                        Header="Gestione perioperatoria" />
                </MenuItem>
                <Separator />
                <MenuItem
                    Command="{Binding CheckUpdatesCommand}"
                    Header="Verifica aggiornamenti" />
                <Separator />
                <MenuItem
                    Command="{Binding ShowAboutCommand}"
                    Header="About TaoGEST..." />
            </MenuItem>
        </Menu>

        <!--  Content Area  -->
        <ContentControl x:Name="ContentArea" Grid.Row="2" />

        <!--  Status Bar  -->
        <Border
            Grid.Row="3"
            Padding="10,5"
            Background="#ECF0F1">
            <TextBlock
                FontSize="11"
                Foreground="#7F8C8D"
                Text="Versione 1.0.0.0 - Beta" />
        </Border>
    </Grid>
</Window>
