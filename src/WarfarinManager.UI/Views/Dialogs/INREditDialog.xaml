<Window
    x:Class="WarfarinManager.UI.Views.Dialogs.INREditDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sys="clr-namespace:System;assembly=System.Runtime"
    xmlns:enums="clr-namespace:WarfarinManager.Shared.Enums;assembly=WarfarinManager.Shared"
    Title="Modifica Controllo INR"
    MinWidth="500"
    MinHeight="550"
    Width="600"
    Height="650"
    MaxWidth="{Binding Source={x:Static SystemParameters.WorkArea}, Path=Width}"
    MaxHeight="{Binding Source={x:Static SystemParameters.WorkArea}, Path=Height}"
    WindowStartupLocation="CenterOwner"
    ResizeMode="CanResize"
    mc:Ignorable="d">

    <Window.Resources>
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Foreground" Value="#333333" />
            <Setter Property="Margin" Value="0,0,0,5" />
        </Style>

        <Style x:Key="InputStyle" TargetType="Control">
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Padding" Value="8,6" />
            <Setter Property="Margin" Value="0,0,0,15" />
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  Header  -->
        <Border
            Grid.Row="0"
            Padding="10"
            Background="#0078D4"
            CornerRadius="4"
            Margin="0,0,0,15">
            <TextBlock
                FontSize="16"
                FontWeight="Bold"
                Foreground="White"
                Text="âœï¸ Modifica Controllo INR" />
        </Border>

        <!--  Form  -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!--  Data Controllo  -->
                <TextBlock Style="{StaticResource LabelStyle}" Text="Data Controllo:" />
                <DatePicker
                    x:Name="ControlDatePicker"
                    Style="{StaticResource InputStyle}"
                    DisplayDateEnd="{x:Static sys:DateTime.Today}" />

                <!--  Valore INR  -->
                <TextBlock Style="{StaticResource LabelStyle}" Text="Valore INR:" />
                <TextBox
                    x:Name="INRValueTextBox"
                    Style="{StaticResource InputStyle}" />

                <!--  Dose Settimanale  -->
                <TextBlock Style="{StaticResource LabelStyle}" Text="Dose Settimanale (mg):" />
                <TextBox
                    x:Name="WeeklyDoseTextBox"
                    Style="{StaticResource InputStyle}" />

                <!--  Fase Terapia  -->
                <TextBlock Style="{StaticResource LabelStyle}" Text="Fase della Terapia:" />
                <ComboBox
                    x:Name="PhaseComboBox"
                    Style="{StaticResource InputStyle}"
                    DisplayMemberPath="Description" />

                <!--  Compliance  -->
                <CheckBox
                    x:Name="IsCompliantCheckBox"
                    Margin="0,0,0,15"
                    FontSize="12"
                    Content="Paziente compliance (assume regolarmente la terapia)" />

                <!--  Dosi Giornaliere (opzionale)  -->
                <Grid Margin="0,10,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <TextBlock
                        Grid.Column="0"
                        Style="{StaticResource LabelStyle}"
                        Text="Dosi Giornaliere (mg):"
                        Margin="0" />

                    <Button
                        Grid.Column="1"
                        Click="RecalculateDosesButton_Click"
                        Padding="8,4"
                        Background="#0078D4"
                        Foreground="White"
                        BorderThickness="0"
                        Cursor="Hand"
                        ToolTip="Ricalcola le dosi giornaliere distribuendole equilibratamente dalla dose settimanale">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border
                                    Background="{TemplateBinding Background}"
                                    CornerRadius="3"
                                    Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ”„ " FontSize="11" />
                            <TextBlock Text="Ricalcola" FontSize="11" />
                        </StackPanel>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#005A9E" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
                <Border
                    Padding="10"
                    Background="#F8F9FA"
                    BorderBrush="#E0E0E0"
                    BorderThickness="1"
                    CornerRadius="4"
                    Margin="0,0,0,15">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="10" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!--  LunedÃ¬  -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Lun:" VerticalAlignment="Center" Margin="0,0,10,5" />
                        <TextBox Grid.Row="0" Grid.Column="1" x:Name="MondayDoseTextBox" Margin="0,0,0,5" />

                        <!--  MartedÃ¬  -->
                        <TextBlock Grid.Row="0" Grid.Column="3" Text="Mar:" VerticalAlignment="Center" Margin="0,0,10,5" />
                        <TextBox Grid.Row="0" Grid.Column="4" x:Name="TuesdayDoseTextBox" Margin="0,0,0,5" />

                        <!--  MercoledÃ¬  -->
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Mer:" VerticalAlignment="Center" Margin="0,0,10,5" />
                        <TextBox Grid.Row="1" Grid.Column="1" x:Name="WednesdayDoseTextBox" Margin="0,0,0,5" />

                        <!--  GiovedÃ¬  -->
                        <TextBlock Grid.Row="1" Grid.Column="3" Text="Gio:" VerticalAlignment="Center" Margin="0,0,10,5" />
                        <TextBox Grid.Row="1" Grid.Column="4" x:Name="ThursdayDoseTextBox" Margin="0,0,0,5" />

                        <!--  VenerdÃ¬  -->
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Ven:" VerticalAlignment="Center" Margin="0,0,10,5" />
                        <TextBox Grid.Row="2" Grid.Column="1" x:Name="FridayDoseTextBox" Margin="0,0,0,5" />

                        <!--  Sabato  -->
                        <TextBlock Grid.Row="2" Grid.Column="3" Text="Sab:" VerticalAlignment="Center" Margin="0,0,10,5" />
                        <TextBox Grid.Row="2" Grid.Column="4" x:Name="SaturdayDoseTextBox" Margin="0,0,0,5" />

                        <!--  Domenica  -->
                        <TextBlock Grid.Row="3" Grid.Column="0" Text="Dom:" VerticalAlignment="Center" Margin="0,0,10,0" />
                        <TextBox Grid.Row="3" Grid.Column="1" x:Name="SundayDoseTextBox" />
                    </Grid>
                </Border>

                <!--  Note  -->
                <TextBlock Style="{StaticResource LabelStyle}" Text="Note:" />
                <TextBox
                    x:Name="NotesTextBox"
                    Height="80"
                    Margin="0,0,0,15"
                    AcceptsReturn="True"
                    TextWrapping="Wrap"
                    VerticalScrollBarVisibility="Auto" />
            </StackPanel>
        </ScrollViewer>

        <!--  Buttons  -->
        <StackPanel
            Grid.Row="2"
            Margin="0,15,0,0"
            HorizontalAlignment="Right"
            Orientation="Horizontal">
            <Button
                Width="100"
                Height="35"
                Margin="0,0,10,0"
                Click="SaveButton_Click"
                Content="Salva"
                FontWeight="SemiBold">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#107C10" />
                        <Setter Property="Foreground" Value="White" />
                        <Setter Property="BorderThickness" Value="0" />
                        <Setter Property="Cursor" Value="Hand" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border
                                        Background="{TemplateBinding Background}"
                                        CornerRadius="4"
                                        Padding="10,5">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#0E6B0E" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button
                Width="100"
                Height="35"
                Click="CancelButton_Click"
                Content="Annulla"
                FontWeight="SemiBold">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#666666" />
                        <Setter Property="Foreground" Value="White" />
                        <Setter Property="BorderThickness" Value="0" />
                        <Setter Property="Cursor" Value="Hand" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border
                                        Background="{TemplateBinding Background}"
                                        CornerRadius="4"
                                        Padding="10,5">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#555555" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </StackPanel>
    </Grid>
</Window>
